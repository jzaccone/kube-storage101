
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="IBM Developer">
      
      
        <link rel="canonical" href="https://ibm.github.io/kube-storage101/Lab7/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Lab 7. Connecting to External Storage - Kubernetes Storage 101</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"IBM Plex Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-7-connecting-to-external-storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ibm.github.io/kube-storage101" title="Kubernetes Storage 101" class="md-header-nav__button md-logo" aria-label="Kubernetes Storage 101">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Kubernetes Storage 101
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Lab 7. Connecting to External Storage
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm/kube-storage101/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    kube-storage101
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Lab0/" class="md-tabs__link">
        Workshop
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ibm.github.io/kube-storage101" title="Kubernetes Storage 101" class="md-nav__button md-logo" aria-label="Kubernetes Storage 101">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kubernetes Storage 101
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm/kube-storage101/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    kube-storage101
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
      
      <label class="md-nav__link" for="nav-1">
        Welcome
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Welcome" data-md-level="1">
        <label class="md-nav__title" for="nav-1">
          <span class="md-nav__icon md-icon"></span>
          Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About the workshop
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Workshop
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Workshop" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab0/" class="md-nav__link">
        Lab 0. Prework
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab1/" class="md-nav__link">
        Lab 1. Container Storage and Kubernetes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab2/" class="md-nav__link">
        Lab 2. File Storage with Kubernetes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab3/" class="md-nav__link">
        Lab 3. Block Storage with Kubernetes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab4/" class="md-nav__link">
        Lab 4. Kubernetes StatefulSets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Lab5/" class="md-nav__link">
        Lab 5. Object Storage with Kubernetes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prereqs" class="md-nav__link">
    Prereqs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#approach-1-create-a-database-service-using-the-ibm-cloud-console" class="md-nav__link">
    Approach 1: Create a database service using the IBM Cloud console
  </a>
  
    <nav class="md-nav" aria-label="Approach 1: Create a database service using the IBM Cloud console">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-credential-for-your-cloudantdb-service" class="md-nav__link">
    Create a credential for your CloudantDB service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save-your-credentials-in-a-kubernetes-secret" class="md-nav__link">
    Save your credentials in a Kubernetes secret
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#approach-2-use-the-ibm-cloud-operator-to-provision-a-database-instance-on-ibm-cloud" class="md-nav__link">
    Approach 2: Use the IBM Cloud Operator to provision a database instance on IBM Cloud
  </a>
  
    <nav class="md-nav" aria-label="Approach 2: Use the IBM Cloud Operator to provision a database instance on IBM Cloud">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-api-key-for-your-target-account" class="md-nav__link">
    Create an API Key for your Target Account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-ibm-cloud-operator" class="md-nav__link">
    Installing the IBM Cloud operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-operators" class="md-nav__link">
    Understanding Operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-instance-of-cloudant" class="md-nav__link">
    Creating an instance of Cloudant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-service-instance-and-bind-to-the-cluster" class="md-nav__link">
    Create the service instance and bind to the cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    Debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-ibm-cloud-console-verify-the-cloudant-db-service" class="md-nav__link">
    Check the IBM Cloud console - verify the Cloudant DB service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifecycle-management-with-the-ibm-cloud-operator" class="md-nav__link">
    Lifecycle management with the IBM Cloud operator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    Next Steps
  </a>
  
    <nav class="md-nav" aria-label="Next Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-new-database-on-the-cloudantdb-service" class="md-nav__link">
    Create a new database on the CloudantDB service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-the-guestbook-application-to-read-from-cloudantdb" class="md-nav__link">
    Modify the guestbook application to read from CloudantDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-and-push-a-new-docker-image" class="md-nav__link">
    Build and push a new docker image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-kubernetes-yamls" class="md-nav__link">
    Configure Kubernetes yamls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-your-changes-by-deploying-to-kubernetes" class="md-nav__link">
    Test your changes by deploying to Kubernetes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm/kube-storage101/edit/master/docs/Lab7/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="lab-7-connecting-to-external-storage">Lab 7. Connecting to External Storage<a class="headerlink" href="#lab-7-connecting-to-external-storage" title="Permanent link">&para;</a></h1>
<p>This lab configures our nodejs guestbook application to connect to an external database, outside of the kubernetes cluster where the guestbook app is deployed. We will be using a managed database service offered on IBM Cloud, but you can apply the concepts in this lab to connect to any external database service such as a legacy database you might have running on premise.</p>
<p>With a managed database service, you can take advantage of the provided service's built features for scaling, security, etc. If you'd rather implement your own database service, check out the previous labs in this workshop.</p>
<h3 id="prereqs">Prereqs<a class="headerlink" href="#prereqs" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Before you begin, follow the prereqs in <a href="../Lab0/">Lab0</a>.</p>
</li>
<li>
<p>Clone the repos
    <div class="highlight"><pre><span></span><code>cd $HOME
git clone https://github.com/IBM/guestbook-nodejs.git guestbook-cloudant
git clone --branch storage https://github.com/IBM/guestbook-nodejs-config.git
cd $HOME/guestbook-nodejs-config/storage/lab1
</code></pre></div></p>
</li>
<li>
<p>Create a new Kubernetes namespace. This will help us avoid conflicts with previous labs. Switch to the new namespace so all subsequent commands will run within that namespace:</p>
<div class="highlight"><pre><span></span><code>  kubectl create namespace cloudant
  kubectl config set-context --current --namespace=cloudant
</code></pre></div>
</li>
</ol>
<p>Please choose one of the two options for setting up the database service
- <a href="#Approach-1:-Create-a-database-service-using-the-IBM-Cloud-console">Approach 1</a>
- <a href="#-Approach-2:-Use-the-IBM-Cloud-Operator-to-provision-a-database-instance-on-IBM-Cloud">Approach 2</a></p>
<h2 id="approach-1-create-a-database-service-using-the-ibm-cloud-console">Approach 1: Create a database service using the IBM Cloud console<a class="headerlink" href="#approach-1-create-a-database-service-using-the-ibm-cloud-console" title="Permanent link">&para;</a></h2>
<p>Follow these steps to create a free <code>lite</code> CloudantDB on IBM Cloud using a free IBM Cloud account. <a href="https://cloud.ibm.com/registration">Create an account</a> if you haven't already.</p>
<p>Navigate to the <a href="https://cloud.ibm.com/catalog">IBM Cloud Catalog</a>. Make sure your personal account in selected in the dropdown in the upper right. Search for <strong>Cloudant</strong> in the search bar and click the <strong>Cloudant</strong> tile. (Click <strong>Log In</strong> in the upper righthand side if you are not logged in).</p>
<p><img alt="CloudantDB in the Catalog" src="../images/assets/catalog-cloudant.png" /></p>
<p>Set the instance name to "mycloudant". Select "IAM and legacy credentials" to <strong>Authentication method</strong>. Ensure the "Lite" plan is selected. Then hit <strong>create</strong>.</p>
<p><img alt="Install CloudantDB from console" src="../images/assets/install-cloudant-console.png" /></p>
<h3 id="create-a-credential-for-your-cloudantdb-service">Create a credential for your CloudantDB service<a class="headerlink" href="#create-a-credential-for-your-cloudantdb-service" title="Permanent link">&para;</a></h3>
<p>Locate your credentials in your CloudantDB service on IBM Cloud. From the IBM Cloud resource page, search for <strong>mycloudant</strong> to find your Cloudant service. </p>
<p><img alt="cloudant in resource list" src="../.gitbook/assets/cloudant-in-resource-list.png" /></p>
<p>From the Cloudant DB service, select <strong>Service Credentials</strong> on the left. Then click the blue <strong>New credential</strong> on the right.</p>
<p><img alt="create new credentials" src="../images/assets/cloudant-service-creds.png" /></p>
<p>Select the default name and role (should be <code>manager</code>) for the credentials, and click <strong>Create</strong>.</p>
<p>Expand the credential and take note of the <strong>url</strong> parameter. We will be using this value to populate a Kubernetes secret in the next step.</p>
<p><img alt="Cloudant URL" src="../.gitbook/assets/cloudant-url.png" /></p>
<h3 id="save-your-credentials-in-a-kubernetes-secret">Save your credentials in a Kubernetes <code>secret</code><a class="headerlink" href="#save-your-credentials-in-a-kubernetes-secret" title="Permanent link">&para;</a></h3>
<p>From a terminal where you are connected to your kubernetes cluster, run the following command to save the URL to your cloudant service in your cluster as a secret:</p>
<div class="highlight"><pre><span></span><code>kubectl create secret generic binding-cloudant --from-literal=url=[CLOUDANT_URL]
</code></pre></div>
<p>Once completed, <a href="#Next-Steps">skip ahead to the next section</a></p>
<h2 id="approach-2-use-the-ibm-cloud-operator-to-provision-a-database-instance-on-ibm-cloud">Approach 2: Use the IBM Cloud Operator to provision a database instance on IBM Cloud<a class="headerlink" href="#approach-2-use-the-ibm-cloud-operator-to-provision-a-database-instance-on-ibm-cloud" title="Permanent link">&para;</a></h2>
<p>The Operator Framework provides support for Kubernetes-native extensions to manage custom resource types through operators. Many operators are available through <a href="https://operatorhub.io/">operatorhub.io</a>, including the IBM Cloud operator. The IBM Cloud operator simplifies the creation of IBM Cloud services and resouces and binding credentials from these resources into a Kubernetes cluster. The instructions in this guide are adapted from the IBM Developer tutorial <a href="https://developer.ibm.com/tutorials/simplify-lifecycle-management-kubernetes-openshift-ibm-cloud-operator/">Simplify the lifecycle management process for your Kubernetes apps with operators</a>.</p>
<p>With the IBM Cloud Kubernetes Service clusters at version 1.16 and later, the Operator Framework is already installed. So all you will need to do is install the IBM Cloud Operator. New clusters created after March 1<sup>st</sup>, 2020 should all be at this level (or later).</p>
<h3 id="create-an-api-key-for-your-target-account">Create an API Key for your Target Account<a class="headerlink" href="#create-an-api-key-for-your-target-account" title="Permanent link">&para;</a></h3>
<p>We will configure the IBM Cloud Operator to manage resources on your personal IBM Cloud Account. You will be able to create and manage a Cloudant DB lite service that only you will have access to. </p>
<p>Note: The account that your Cloudant service will be created on MAY be different than the account where your Kubernetes cluster is located, so please keep that in mind. If you are participating in a workshop with the IBM Developer Advocacy team, we do this to avoid creating multiple lite cloudantDB services on the shared account where all the k8s clusters are running (IBM Cloud accounts are limited to 1 lite instance per service)</p>
<ol>
<li>
<p>Login to your personal IBM Cloud account. Use <code>--sso</code> if using single-sign-on. Select your personal account when asked upon logging in.</p>
<div class="highlight"><pre><span></span><code>ibmcloud login
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ ibmcloud login
API endpoint: https://cloud.ibm.com
Region: us-south
Authenticating...
OK

Select an account:
<span class="m">1</span>. John H. Zaccone<span class="s1">&#39;s Account (a21524842fc807640e69bf89c00009fc)</span>
<span class="s1">2. Another Account (12345)</span>
<span class="s1">Enter a number&gt; 1</span>
<span class="s1">Targeted account John H. Zaccone&#39;</span>s Account <span class="o">(</span>a21524842fc807640e69bf89c00009fc<span class="o">)</span>

API endpoint:      https://cloud.ibm.com
Region:            us-south
User:              John.Zaccone@ibm.com
Account:           John H. Zaccone<span class="s1">&#39;s Account (a21524842fc807640e69bf89c00009fc)</span>
<span class="s1">Resource group:    No resource group targeted, use &#39;</span>ibmcloud target -g RESOURCE_GROUP<span class="err">&#39;</span>
CF API endpoint:
Org:
</code></pre></div>
</li>
<li>
<p>Create a service ID in IBM Cloud IAM. If possible, do not use spaces in the names for your IAM credentials. When you use the operator binding feature, any spaces are replaced with underscores.</p>
<div class="highlight"><pre><span></span><code>ibmcloud iam service-id-create serviceid-ico
</code></pre></div>
</li>
<li>
<p>Assign the service ID access to the required permissions to work with the IBM Cloud services. You will need the <strong>Manager</strong> role to provision a Cloudant service.</p>
<div class="highlight"><pre><span></span><code>ibmcloud iam service-policy-create serviceid-ico --roles Manager,Administrator --resource-group-name default --region us-south
</code></pre></div>
</li>
<li>
<p>We will also need to provide Account Management to allow us to create an cloudant service on our IBM Cloud account: </p>
<div class="highlight"><pre><span></span><code>ibmcloud iam service-policy-create serviceid-ico --account-management --roles Administrator
</code></pre></div>
</li>
<li>
<p>Create an API key for the service ID.</p>
<div class="highlight"><pre><span></span><code>ibmcloud iam service-api-key-create apikey-ico serviceid-ico
</code></pre></div>
</li>
<li>
<p>Set the API key of the service ID as your CLI environment variable. Now, when you run the installation script, the script uses the service ID's API key.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IBMCLOUD_API_KEY</span><span class="o">=</span>&lt;apikey-ico-value&gt;
</code></pre></div>
</li>
<li>
<p>Confirm that the API key environment variable is set in your CLI.</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="nv">$IBMCLOUD_API_KEY</span>
</code></pre></div>
</li>
</ol>
<h3 id="installing-the-ibm-cloud-operator">Installing the IBM Cloud operator<a class="headerlink" href="#installing-the-ibm-cloud-operator" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>If you don't already have <code>kubectl</code> configured to point to your cluster, follow the setup steps in <a href="../Lab0/">Lab0</a> to configure.</p>
</li>
<li>
<p>Target the default resource group that your service ID has privledges to.</p>
<div class="highlight"><pre><span></span><code>ibmcloud target -g default
</code></pre></div>
</li>
<li>
<p>The operator marketplace catalog provides a URL for the resources to install for each operator. Install the IBM Cloud Operator with the following command:</p>
<div class="highlight"><pre><span></span><code>curl -sL https://raw.githubusercontent.com/IBM/cloud-operators/master/hack/configure-operator.sh <span class="p">|</span> bash -s -- install
</code></pre></div>
<p>Check that the pod for the IBM Cloud operator is running with:</p>
<div class="highlight"><pre><span></span><code>kubectl get pods --namespace ibmcloud-operator-system
</code></pre></div>
<p>You should see after a minute or two that the pod for the operator is running:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>kubectl get pods --namespace ibmcloud-operator-system
<span class="go">NAMESPACE                  NAME                                                    READY   STATUS    RESTARTS   AGE</span>
<span class="go">ibmcloud-operator-system   ibmcloud-operator-controller-manager-56c8548f89-stzdq   2/2     Running   0          14m</span>
</code></pre></div>
</li>
</ol>
<h3 id="understanding-operators">Understanding Operators<a class="headerlink" href="#understanding-operators" title="Permanent link">&para;</a></h3>
<p>The <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Operator Pattern</a> is an emerging approach to extend through automation the expertise of human operators into the cluster environment. Operators are intended to support applications and management of other resources in and related to kubernetes clusters starting at installation, but continuing to day 2 operations of monitoring, backup, fault recovery and, of course, updates.</p>
<p>Operators are custom code that uses the Kubernetes API (as a client) to implement a controller for a <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/"><strong>Custom Resource</strong></a>. Unlike the controllers built into the Kubernetes control plane which run on the Kubernetes master node, operators run outside of the Kubernetes control plan as pods on the worker nodes in the cluster. You can verify that fact by the <code>kubectl get pods</code> command above, which lists the pods of the operator running on a worker node.</p>
<p>In addition to the IBM Cloud Operator, there are many operators that can manage resources within your cluster available from the <a href="https://operatorhub.io">Operator Hub</a>. The Operator Hub includes many useful operators including operators that implement database installation, monitoring tools, application development frameworks, application runtimes and more.</p>
<p>Your cluster now has the IBM Cloud operator installed. This operator is able to configure two custom resources in the cluster, a <strong>Service</strong> and a <strong>Binding</strong>. The <strong>Service</strong> defines a specific IBM Cloud service instance type to create, and the <strong>Binding</strong> specifies a named binding of a service instance to a secret in the cluster. For more details about the IBM Cloud operator see the <a href="https://github.com/IBM/cloud-operators">project repository</a>.</p>
<h3 id="creating-an-instance-of-cloudant">Creating an instance of Cloudant<a class="headerlink" href="#creating-an-instance-of-cloudant" title="Permanent link">&para;</a></h3>
<p>For an application running within a Kubernetes cluster to be able to access an IBM Cloud service, the service needs to be created and the credentials to access the service must be added to the cluster so that they can be read by deployed applications. The Kubernetes cluster running the application accessing the service instance can be anywhere, but in this case you'll be using your Kubernetes cluster on IBM Cloud. We will be using a Cloudant DB service on IBM Cloud for this lab because it is free, json document datastore that will be easy for us to swap from our previous MongoDB database connection.</p>
<h3 id="create-the-service-instance-and-bind-to-the-cluster">Create the service instance and bind to the cluster<a class="headerlink" href="#create-the-service-instance-and-bind-to-the-cluster" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Change into the <code>yaml</code> directory. apply the <code>cloudant-ibmcloud.yaml</code> file.</p>
<div class="highlight"><pre><span></span><code><span class="go">cd $HOME/guestbook-nodejs-config/storage/lab7</span>
</code></pre></div>
</li>
<li>
<p>Apply the <code>cloudant-ibmcloud.yaml</code> file using kubectl. This file defines a <strong>Service</strong> and <strong>Binding</strong> resource:</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f cloudant-ibmcloud.yaml
</code></pre></div>
<p>This file defines a <strong>Service</strong> and <strong>Binding</strong> resource and if successful there will be confirmation for both:</p>
<div class="highlight"><pre><span></span><code>$ kubectl apply -f cloudant-ibmcloud.yaml
service.ibmcloud.ibm.com/mycloudant created
binding.ibmcloud.ibm.com/binding-cloudant created
</code></pre></div>
</li>
<li>
<p>Check for the secret for the CloudantDB service instance added to the current namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl get secret binding-cloudant
</code></pre></div>
<p>You should see confirmation of the secret, but there may be a short delay as the credentials are obtained by the operator, so repeat this command until you no longer see an error like: <em>Error from server (NotFound): secrets "binding-cloudant" not found</em></p>
<div class="highlight"><pre><span></span><code>$ kubectl get secret binding-cloudant
NAME           TYPE      DATA      AGE
binding-cloudant   Opaque    <span class="m">6</span>         40s
</code></pre></div>
</li>
</ol>
<h3 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>If the credentials have not been created after a few moments, check the logs of the kubernetes object you created.
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl describe service.ibmcloud.ibm.com/mycloudant
</code></pre></div>
<h3 id="check-the-ibm-cloud-console-verify-the-cloudant-db-service">Check the IBM Cloud console - verify the Cloudant DB service<a class="headerlink" href="#check-the-ibm-cloud-console-verify-the-cloudant-db-service" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Go back to your IBM Cloud tab in the browser and click on the words <strong>IBM Cloud</strong> on the upper left of the top menu. Now your Dashboard view will show a Services item under the <strong>Resource summary</strong>. Click on the <strong>Services</strong> label, and search for <code>mycloudant</code> to find your newly created instance</p>
<p><img alt="Updated Cloud Dashboard" src="../images/assets/verify-cloudant-on-console.png" /></p>
</li>
<li>
<p>Click on the <strong>mycloudant</strong> label in the Services list. This will open up the control panel for the IBM CloudantDB service.</p>
</li>
<li>
<p>Click on the <strong>Service Credentials</strong> label and expands the service credential listed to see your service API Key - make a note of it or just keep the credentials visible.</p>
<p><img alt="Verify Cloudant Credential" src="../images/assets/verify-cloudant-creds-console.png" /></p>
</li>
<li>
<p>Return to the <em>Kubernetes Terminal</em> tab in your web browser and enter this command to extract and decode the apikey from the secret created by the IBM Cloud Operator:</p>
<div class="highlight"><pre><span></span><code>kubectl get secret binding-cloudant -o<span class="o">=</span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.apikey}&#39;</span> <span class="p">|</span> base64 -d <span class="o">&amp;&amp;</span> <span class="nb">echo</span>
</code></pre></div>
<p>Notice how the string displayed is exactly the same as the service API Key visible from the control panel for the service.</p>
</li>
</ol>
<h3 id="lifecycle-management-with-the-ibm-cloud-operator">Lifecycle management with the IBM Cloud operator<a class="headerlink" href="#lifecycle-management-with-the-ibm-cloud-operator" title="Permanent link">&para;</a></h3>
<p>Let's take a look at the custom resource definition (CRD) file that was used in this exercise (<code>cloudant-ibmcloud.yaml</code>).</p>
<div class="highlight"><pre><span></span><code>```yaml
apiVersion: ibmcloud.ibm.com/v1alpha1
kind: Service
metadata:
name: mycloudant
spec:
plan: lite
serviceClass: cloudantnosqldb
---
apiVersion: ibmcloud.ibm.com/v1alpha1
kind: Binding
metadata:
name: binding-cloudant
spec:
serviceName: mycloudant
role: Manager
```
</code></pre></div>
<p>Note that the API version is different from what you may have seen in other resource files in this lab. Since Kubernetes objects are scoped by the API, there's no conflict with the re-use of the <code>kind</code> <strong>Service</strong> in this CRD. Recall that in the internal Kubernetes API, a resource of <code>kind</code> <strong>Service</strong> is used to expose network ports running on pods. Here, the <strong>Service</strong> object type is used to descibe an IBM Cloud platform service from the catalog. The operator uses the <code>spec</code> of the resource to select the desired IBM Cloud service type and offering plan.</p>
<p>The role of the IBM Cloud operator is to manage instances of these services and also create a <strong>Binding</strong> to the service that is stored as a secret in the cluster.
The operator will monitor the IBM Cloud account service instances. If something happens to the service instance, the operator will detect the change and take action. For example, if a the service instance is deleted, the operator will create a new service instance and update the credentials stored in the binding secret.</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Regardless of whether you did approach 1 or approach 2, the end result is the same. You should now have a CloudantDB service created on IBM Cloud with credentials to that service saved inside your Kubernetes as a <code>secret</code>. The next steps walk you through</p>
<p>1) Create a new database on the CloudantDB Service
1) Modify the guestbook application to read from CloudantDB
1) Build and push a new guestbook docker image
1) Edit the Kubernetes deployment yaml files to pull the new version of the application AND the credentials saved in the secret
1) Check your changes by deploying to Kubernetes and testing the application</p>
<h3 id="create-a-new-database-on-the-cloudantdb-service">Create a new database on the CloudantDB service<a class="headerlink" href="#create-a-new-database-on-the-cloudantdb-service" title="Permanent link">&para;</a></h3>
<p>From your newly created Cloudant service on the IBM Cloud console, click <strong>Manage</strong> then <strong>Launch Dashboard</strong>.</p>
<p><img alt="launch cloudant dashboard" src="../images/assets/cloudant-launch-dashboard.png" /></p>
<p>Use your IBM Credentials to login if necessary. From the Cloudant Dashboard screen, click <strong>Create Database</strong> and give it name, such as "mydatabase". Select <strong>Non-partitioned</strong>, then click <strong>Create</strong>.</p>
<p><img alt="launch cloudant dashboard" src="../images/assets/cloudant-create-db.png" /></p>
<p>Remember this name as we will be using it later when we deploy our application.</p>
<h3 id="modify-the-guestbook-application-to-read-from-cloudantdb">Modify the guestbook application to read from CloudantDB<a class="headerlink" href="#modify-the-guestbook-application-to-read-from-cloudantdb" title="Permanent link">&para;</a></h3>
<p>You will have to make minor changes to the Guestbook nodejs application to read from your newly created CloudantDB service.</p>
<p>Navigate to your guestbook application:
<div class="highlight"><pre><span></span><code>cd guestbook-cloudant/src
</code></pre></div></p>
<p>(Optional) Install the <a href="https://loopback.io/doc/en/lb2/Cloudant-connector.html">Loopback connector</a> for CloudantDB. This has been done for you already.</p>
<div class="highlight"><pre><span></span><code>cd guestbook-cloudant/src
npm install loopback-connector-cloudant --save
</code></pre></div>
<p>The connector provides the boilerplate code to connect to different backends. All we have to do is provide some basic configuration.</p>
<p>Define the Cloudant as a datasource by replacing <code>src/server/datasources.json</code> file with the following:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;in-memory&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;in-memory&quot;</span><span class="p">,</span>
    <span class="nt">&quot;localStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;connector&quot;</span><span class="p">:</span> <span class="s2">&quot;memory&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;cloudant&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cloudant&quot;</span><span class="p">,</span>
    <span class="nt">&quot;connector&quot;</span><span class="p">:</span> <span class="s2">&quot;cloudant&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;${CLOUDANT_URL}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;database&quot;</span> <span class="p">:</span> <span class="s2">&quot;${CLOUDANT_DB}&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The environment variables <code>CLOUDANT_URL</code> and <code>CLOUDANT_DB</code> will be loaded in our environment via our Kubernetes <code>deployment</code>.</p>
<p>Modify <code>src/server/model-config.json</code> to reference the datasource you just created:</p>
<div class="highlight"><pre><span></span><code>  <span class="err">...</span>
  <span class="nt">&quot;entry&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;dataSource&quot;</span><span class="p">:</span> <span class="s2">&quot;cloudant&quot;</span><span class="p">,</span>
    <span class="nt">&quot;public&quot;</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
  <span class="err">...</span>
</code></pre></div>
<h3 id="build-and-push-a-new-docker-image">Build and push a new docker image<a class="headerlink" href="#build-and-push-a-new-docker-image" title="Permanent link">&para;</a></h3>
<p>Build a docker images with the changes and push to DockerHub. In this lab, we are building and pushing locally. In real-life, we would use CI/CD process to build and push our docker image from source control.</p>
<p>Build the docker image
  <div class="highlight"><pre><span></span><code>docker build -t $DOCKERUSER/guestbook-nodejs:cloudant .
docker login -u $DOCKERUSER
docker push $DOCKERUSER/guestbook-nodejs:cloudant
</code></pre></div></p>
<p>Your guestbook application is all set to talk to a Cloudant database. Next, we will configure our Kubernetes deployment to use the image you just pushed, and to load the missing environment variables: <code>CLOUDANT_URL</code> and <code>CLOUDANT_DB</code> from our <code>binding-cloudant</code> secret.</p>
<h3 id="configure-kubernetes-yamls">Configure Kubernetes yamls<a class="headerlink" href="#configure-kubernetes-yamls" title="Permanent link">&para;</a></h3>
<p>We have a yaml file created for you, but you will need to enter the location of the Docker Image you built in the previous step.</p>
<p>Navigate to the location of your yaml deployment files, and inspect.</p>
<div class="highlight"><pre><span></span><code>cd $HOME/guestbook-nodejs-config/storage/lab7
cat guestbook-deployment.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code>apiVersion: apps/v1
kind: Deployment
metadata:
name: guestbook-cloudant
labels:
    app: guestbook
spec:
selector:
    matchLabels:
    app: guestbook
template:
    metadata:
    labels:
        app: guestbook
    spec:
    containers:
    - name: guestbook
        image: [IMAGE_NAME]
        resources:
        requests:
            cpu: 100m
            memory: 100Mi
        ports:
        - name: http
        containerPort: 3000
        env:
        - name: CLOUDANT_URL
        valueFrom:
            secretKeyRef: 
            name: binding-cloudant
            key: url
        - name : CLOUDANT_DB
        value: &quot;[DB_NAME]&quot;
</code></pre></div>
<p>Replace <code>[IMAGE_NAME]</code> in the file <code>guestbook-deployment-cloudant.yaml</code> with the name of the image you uploaded to Docker Hub. Replace <code>[DB_NAME]</code> with the name of the Cloudant Database your created in a previous step.</p>
<p>Notice how we load the environment variable <code>CLOUDANT_URL</code> from the <code>binding-cloudant</code> secret. This yaml files now defines all the environment variables our guestbook application needs to connect to our Cloudant DB.</p>
<h3 id="test-your-changes-by-deploying-to-kubernetes">Test your changes by deploying to Kubernetes<a class="headerlink" href="#test-your-changes-by-deploying-to-kubernetes" title="Permanent link">&para;</a></h3>
<p>Deploy to kubernetes using <code>kubectl apply</code>:</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f guestbook-deployment.yaml
kubectl apply -f guestbook-service.yaml
</code></pre></div>
<p>Check your pods. If there are any errors, use <code>kubectl describe pod [POD NAME]</code> to debug,
<div class="highlight"><pre><span></span><code>kubectl get pods
</code></pre></div></p>
<p>Find the URL for the guestbook application by joining the worker node external IP and service node port.</p>
<div class="highlight"><pre><span></span><code>HOSTNAME=`kubectl get nodes -ojsonpath=&#39;{.items[0].metadata.labels.ibm-cloud\.kubernetes\.io\/external-ip}&#39;`
SERVICEPORT=`kubectl get svc guestbook -o=jsonpath=&#39;{.spec.ports[0].nodePort}&#39;`
echo &quot;http://$HOSTNAME:$SERVICEPORT&quot;
</code></pre></div>
<p>Navigate to the guestbook in a broswer, and add some entries:</p>
<p><img alt="guestbook" src="../.gitbook/assets/guestbook.png" /></p>
<p>From the Cloudant Dashboard, selected <code>myDatabase</code> and you should see documents created for the entries you created.
<img alt="guestbook" src="../.gitbook/assets/cloudant-docs.png" /></p>
<p>This Cloudant database service is external to the Kubernetes service and data persists outside of the lifecycle of the container/pod/kubernetes cluster. The Cloudant service is a scalable json document storage solution that can be distributed across regions. For more information, check out the <a href="https://www.ibm.com/cloud/cloudant">Cloudant Product Page</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IBM Developer
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>